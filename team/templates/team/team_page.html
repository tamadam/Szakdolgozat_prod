{% extends 'base_new.html' %}

{% load static %}

{% block content %}


<style>


#team-selector-page{
	width: 100%;
	height: 100%;
	background-color: white;
	background: none;	
	background-position: center;
	background-repeat: no-repeat;
	background-size: cover;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	font-family: 'Kanit', sans-serif;
	font-size: 1.4em;
	width: 1900px;
	user-select: none;
}

#team-selector-header{
	display: flex;
	align-items: center;
	justify-content: center;
	height: 20%;
	width: 100%;

}


#team-selector-body{
	display: flex;
	align-items: center;
	justify-content: center;
	height: 60%;
	width: 100%;

}



#team-selector-footer{
	display: flex;
	align-items: center;
	justify-content: center;
	height: 20%;
	width: 100%;

}

/* --- title */
#team-selector-title-left{
	width: 14%;
}

#team-selector-title-center{
	width: 72%;
	display: flex;
	align-items: center;
	justify-content: center;
	text-align: center;
	color: #d5ba22;

}

#team-selector-title-right{
	width: 14%;
}


#main-page-button {
	display: flex;
	justify-content: center;
	align-items: center; 
	width: 100%;
	height: 100%;

}

#main-page-button img{
	width: 40%;
	height: 40;
	max-width: 100%;
	max-height: 100%;

}

.go-to-main-page:hover {
	cursor: pointer;
}



.go-to-main-page:active {
	/*content:url("{% static 'images/previous-button-purple.png' %}");*/
}

/* --- */

#go-back-to-selector {
	display: none;
	justify-content: center;
	align-items: center; 
	width: 30%;
	height: 30%;

}

#go-back-to-selector img{

	max-width: 100%;
	max-height: 100%;

}

.go-to-selector:hover {
	cursor: pointer;
}



.go-to-selector:active {
	/*content:url("{% static 'images/back-button-purple.png' %}");*/
}

/* -- */

.loader-container {
	width: 100%;
	height: 100%;
	position: absolute;
	top: 0;
	left: 0;
	background-color: black;
	display: flex;
	justify-content: center;
	align-items: center;
	z-index: 10;
	color: white;
	font-family: 'Kanit', sans-serif;
	font-size: 1.4em;

}

#selector-buttons{
	display: flex;
	flex-direction: row;
	align-items: center;
	justify-content: center;
	width: 100%;
	height: 50%;
	font-size: 2em;


}

#select-other-team{
	display: flex;
	align-items: center;
	justify-content: center;
	width: 20%;
	height: 100%;
	border: 4px solid black;
	border-radius: 20px;
	margin-right: 1em;
	background-color: rgba(213, 186, 34, 0.9); 

	text-align: center;
}


#select-other-team:hover{
	background-color: #f70044;
	color: #d5ba22;
	cursor: pointer;
}



#create-team-button{
	display: flex;
	align-items: center;
	justify-content: center;
	width: 20%;
	height: 100%;
	border: 4px solid black;
	border-radius: 20px;
	margin-left: 1em;
	background-color: rgba(213, 186, 34, 0.9);
	text-align: center;
}

#create-team-button:hover{
	background-color: #f70044;
	color: #d5ba22;
	cursor: pointer;
}

#create-team-div{
	display: none;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	width: 100%;
	height: 60%;
}

#create-team-form-id{
	height: 80%;
	width: 30%;
	min-width: 600px;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	background-color: rgba(42, 66, 88, 0.6);
	border-radius: 20px;
	color: #f4d734;
}

.create-team-input-container{
	display: flex;
	flex-direction: row;
	align-items: center;
	justify-content: center;
	height: 15%;
	width: 60%;
	margin-top: 0.4em;
}

.create-team-input-container input {
	outline: none;
	border: none;
	font-size: 1em;
	padding: 0.2em;
	border-radius: 10px;
	font-family: 'Kanit', sans-serif;
	background-color: rgba(255, 230, 80, 0.8);
}

.create-team-input-container input:focus {
	background-color: rgba(255, 230, 80, 1.0);
}

.create-team-description-container{
	display: flex;
	flex-direction: row;
	align-items: center;
	justify-content: center;
	height: 55%;
	width: 60%;
	margin-top: 0.4em;
}

.create-team-submit-container{
	display: flex;
	align-items: center;
	justify-content: center;
	height: 30%;
	width: 100%;
}

.create-team-label-container{
	display: flex;
	align-items: center;
	justify-content: flex-end;
	width: 40%;
	margin-right: 0.2em;

}


.create-team-input-field{
	display: flex;
	align-items: center;
	justify-content: flex-start;
	width: 100%;
	height: 100%;
	margin-left: 0.2em;
}


.create-team-input-field textarea{
	display: flex;
	font-size: 1em;
	padding: 0.2em;
	border-radius: 10px;
	height: 90%;
	width: 90%;
	resize: none;
	outline: none;
	border: none;
	font-family: 'Kanit', sans-serif;
	background-color: rgba(255, 230, 80, 0.8);
}

.create-team-input-field textarea:focus{
	background-color: rgba(255, 230, 80, 1.0);
}

#id_description{
	white-space: pre-wrap;
}



#error-messages-div{
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	color: red;
	height: 20%;
	width: 40%;
	text-align: center;
	visibility: hidden;
}


#error-messages-div span{
	font-size: 1.1em;

}


#error-messages-div ul{
	list-style-type:none;
}

#add-team-button{
	outline: none;
	background: none;
	background-image: none;
	background-position: center;
	background-repeat: no-repeat;
	background-size: cover;
	min-width: 300px;
	font-family: 'Kanit', sans-serif;
	font-size: 1em;
	border: none;
}

#add-team-button:hover{
	background-image: none;
	background-position: center;
	background-repeat: no-repeat;
	background-size: cover;
	cursor: pointer;
	color: #f4d734;
}



</style>

<div id="team-selector-page">
	<div id="team-selector-header">
		<div id="team-selector-title-left">
			<div id="main-page-button">
				<img src="{% static 'images/previous-button.png' %}" alt="Vissza" class="go-to-main-page" onmouseover="changeColor(this)" onmouseout="resetColor(this)">
			</div>
		</div>
		<div id="team-selector-title-center">
			<div id="team-selector-title">
				<!--<h1>Csapat</h1>-->
			</div>
		</div>
		<div id="team-selector-title-right">	
		</div>

	</div>
	<div id="team-selector-body">
		<div id="selector-buttons">
			<div id="select-other-team">Csatlakozás egy csapathoz</div>
			<div id="create-team-button">Csapat létrehozása</div>
		</div>
		<div id="create-team-div">
			<form method="POST" id="create-team-form-id">
				{%csrf_token%}
				<div class="create-team-input-container">
					<div class="create-team-label-container">
						<label for="id_name">Csapatnév</label>						
					</div>
					<div class="create-team-input-field">
						<input type="text" name="name" maxlength="60" required id="id_name">						
					</div>
					
				</div>
				<div class="create-team-description-container">
					<div class="create-team-label-container">
						<label for="id_description">Csapatleírás</label>
					</div>
					<div class="create-team-input-field">
						<textarea name="description" maxlength="100" id="id_description"></textarea>			
					</div>
				</div>

				<div class="create-team-submit-container">
					<button type="submit" value="Add team" id="add-team-button">Csapat létrehozása</button>
				</div>

			</form>
			<div id="error-messages-div">
				<span>Hiba! Kérlek figyelj az alábbiakra!</span>
				{% if form.errors %}
			    	{% for error in form.errors.values %}
			        	<span class="error-messages">{{error}}</span>
			    	{% endfor %}
			 	{% endif %}
			</div>
		</div>


	</div>
	<div id="team-selector-footer">
		<div id="go-back-to-selector">
			<img src="{% static 'images/back-button.png' %}" alt="Vissza" class="go-to-selector" onmouseover="changeColorSelector(this)" onmouseout="resetColorSelector(this)">
		</div>
	</div>
	<div class="loader-container">
	</div>
</div>


<script>
	
	// production
	$("#team-selector-page").css("background-image", "url('{% static 'images/team-select.jpg' %}')".replace(/&amp;/g, "&"));


	$("#add-team-button").css("background-image", "url('{% static 'images/button-back.png' %}')".replace(/&amp;/g, "&"))

	$("#add-team-button").hover(function() {
	    $("#add-team-button").css("background-image", "url('{% static 'images/button-back-red.png' %}')".replace(/&amp;/g, "&"))
	  },
	  function() {
	    $("#add-team-button").css("background-image", "url('{% static 'images/button-back.png' %}')".replace(/&amp;/g, "&"));
	  }
	)



	//

	$(window).on("load", function(){
		$(".loader-container").fadeOut("slow")

	})


	$("#add-team-button").click(function(){
		audio.play()
	})

	$("#select-other-team").click(function(){
		audio.play()
		setTimeout(function(){
			try {
				var url = "{% url 'search' %}?csapat=1"
				var win = window.location.replace(url)
				win.focus()
			}
			catch(error){
				console.log(error)
			}

		}, 200)
		$(".loader-container").fadeIn("fast")
	})


	$("#create-team-button").click(function(){
		audio.play()
		$("#selector-buttons").css("display", "none")
		$("#create-team-div").css("display", "flex")
		$("#go-back-to-selector").css("display", "flex")
		hideErrorMessage()
	})



	const audio = new Audio()
	audio.src = "{% static 'audios/button_click.mp3' %}".replace(/&amp;/g, "&")

	function changeColor(imageElement){
		imageElement.setAttribute("src", "{% static 'images/previous-button-red.png' %}".replace(/&amp;/g, "&"))
	}

	function resetColor(imageElement){
		imageElement.setAttribute("src", "{% static 'images/previous-button.png' %}".replace(/&amp;/g, "&"))
	}

	function changeColorSelector(imageElement){
		imageElement.setAttribute("src", "{% static 'images/back-button-red.png' %}".replace(/&amp;/g, "&"))
	}

	function resetColorSelector(imageElement){
		imageElement.setAttribute("src", "{% static 'images/back-button.png' %}".replace(/&amp;/g, "&"))
	}



	$(".go-to-main-page").click(function(){
    	audio.play()

    	setTimeout(function(){
	    	try {

				var url = "{% url 'home_page' %}"
				var win = window.location.replace(url) 
				win.focus()
			}
			catch(error){
				console.log(error)
			}

    	}, 200)
    	$(".loader-container").fadeIn("fast")
	})


	$(".go-to-selector").click(function(){
		audio.play()
		$("#selector-buttons").css("display", "flex")
		$("#create-team-div").css("display", "none")
		$("#go-back-to-selector").css("display", "none")
	})


	var errorMessageSeen = false

	{% if form.errors %}
		$("#selector-buttons").css("display", "none")
		$("#create-team-div").css("display", "flex")
		$("#error-messages-div").css("visibility", "visible")
		$("#go-back-to-selector").css("display", "flex")
		errorMessageSeen = true

	{% else %}
		errorMessageSeen = false
 	{% endif %}


 	function hideErrorMessage(){
 		if(errorMessageSeen){
			$("#error-messages-div").css("visibility", "hidden")
 		}
 	}

</script>


{% endblock %}